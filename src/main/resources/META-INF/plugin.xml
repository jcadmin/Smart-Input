<idea-plugin>
    <id>com.smartinput.pro</id>
    <name>Smart Input Pro</name>
    <vendor email="support@smartinput.pro" url="https://github.com/smartinput/pro">Smart Input Pro Team</vendor>

    <description><![CDATA[
        <h3>智能输入法专业版 - 智能输入法切换</h3>
        <p>智能输入法专业版根据光标上下文自动在中英文输入法之间切换，
        非常适合经常需要在编程时切换语言的中文开发者。</p>

        <h4>主要功能：</h4>
        <ul>
            <li><strong>上下文感知切换</strong>：自动检测代码、注释和字符串上下文</li>
            <li><strong>可视化指示器</strong>：在光标附近显示当前输入法状态</li>
            <li><strong>可自定义规则</strong>：为不同上下文配置切换行为</li>
            <li><strong>跨平台支持</strong>：支持Windows、macOS和Linux</li>
            <li><strong>性能优化</strong>：对IDE性能影响最小</li>
        </ul>

        <h4>工作原理：</h4>
        <ul>
            <li>代码区域：自动切换到英文输入法</li>
            <li>注释：允许中文输入用于文档编写</li>
            <li>字符串字面量：基于内容智能检测</li>
            <li>变量名：强制使用英文输入法</li>
        </ul>

        <p>告别因输入法错误导致的输入错误！</p>
    ]]></description>

    <change-notes><![CDATA[
        <h4>版本 1.0.0</h4>
        <ul>
            <li>首次发布</li>
            <li>基本的上下文检测和输入法切换</li>
            <li>可视化输入法指示器</li>
            <li>配置面板</li>
            <li>支持主要编程语言</li>
        </ul>
    ]]></change-notes>

    <!-- Plugin compatibility -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends optional="true" config-file="java-support.xml">com.intellij.modules.java</depends>

    <!-- Resource bundle for internationalization -->
    <resource-bundle>messages.SmartInputBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Application service for plugin configuration -->
        <applicationService serviceImplementation="com.smartinput.pro.service.SmartInputConfigService"/>
        
        <!-- Project service for input method management -->
        <projectService serviceImplementation="com.smartinput.pro.service.InputMethodService"/>
        
        <!-- Startup activity -->
        <postStartupActivity implementation="com.smartinput.pro.startup.SmartInputStartupActivity"/>
        
        <!-- Configuration panel -->
        <applicationConfigurable 
            parentId="tools" 
            instance="com.smartinput.pro.config.SmartInputConfigurable"
            id="com.smartinput.pro.config"
            displayName="Smart Input Pro"/>
            
        <!-- Editor action handler -->
        <editorActionHandler 
            action="EditorEscape" 
            implementationClass="com.smartinput.pro.action.SmartInputActionHandler"/>
    </extensions>

    <projectListeners>
        <!-- Editor manager listener -->
        <listener
            class="com.smartinput.pro.listener.EditorManagerListener"
            topic="com.intellij.openapi.fileEditor.FileEditorManagerListener"/>
    </projectListeners>

    <actions>
        <!-- 切换插件动作 -->
        <action
            id="SmartInputPro.Toggle"
            class="com.smartinput.pro.action.ToggleSmartInputAction"
            text="切换智能输入法专业版"
            description="启用或禁用智能输入法专业版">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt I"/>
        </action>

        <!-- 手动切换动作 -->
        <action
            id="SmartInputPro.ManualSwitch"
            class="com.smartinput.pro.action.ManualSwitchAction"
            text="手动切换输入法"
            description="手动切换输入法">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift I"/>
        </action>
    </actions>
</idea-plugin>
